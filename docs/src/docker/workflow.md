# MAVs Dockerfile workflow:
The workflow is consisted of two part, build a image and run a container:  
## Build a Image:
1. Pull the base image from avpg/cain:base_cudagl  
2. Build Dockerfile: this Dockerfile mainly copy the source files in ros/ into the container and run “catkin_make” to setup ros workspace.  

### Inside the Dockerfile of avpg/cain:base_cudagl:  
1. Build the base image from nvidia/cudagl:9.0-devel-ubuntu16.04
2. Install essential packages  
3. Install ROS kinetic  
4. Install Julia
5. Install Chrono  

## Run a Container:
1. Setup PATH variable for later use of volumes when execute docker run.
2. docker run command to execute mavs image.

## What Are Volumes? 
For simplicity, volumes are the mechanism for persisting data generated by and used by Docker containers. Click [here](https://docs.docker.com/storage/volumes/) for more information.  
In ``run.sh``, several volumes are created. The results/ directory is used to store the demonstration data and we can do some post process after we terminate the container. As for ros/src/ directory, it shares the source files in the local machine with container. That is, we can modify the files outside the container and see the instant change inside the container. And it fits the scenario where we need to update script file, such as Python, ROS launch file, without rebuild the image.  

![volume_diagram](docker_volume.jpg)